CREATE OR REPLACE PROCEDURE number_of_users AS
   total_users NUMBER;
   WHENEVER SQLERROR EXIT SQL.SQLCODE
   BEGIN
      SELECT COUNT(*) into total_users FROM all_users;
   END;


#!/usr/bin/env groovy

 

timestamps {

    timeout(time: 5, unit: 'MINUTES') {

        node('dev') {

 

               checkout scm

               def proc = " sqlplus amir/amir@localhost @procsql.sql".execute()
               proc.consumeProcessOutput( System.out, System.err )
               proc.waitFor()
 

        }

 

        node('qa') {

              

               def proc = " sqlplus amir/amir@localhost @procsql.sql".execute()
               proc.consumeProcessOutput( System.out, System.err )
               proc.waitFor()

        }

 

        node('prod') {

 
               def proc = " sqlplus amir/amir@localhost @procsql.sql".execute()

               proc.consumeProcessOutput( System.out, System.err )
               proc.waitFor()


        }

 

    }

}

